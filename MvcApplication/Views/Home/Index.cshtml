@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_master.cshtml";
}

<h2>Buildings</h2>

<table id="buildings" class="table table-striped table-hover table-condensed">
	<thead>
		<tr>
			<th>Name</th>
			<th>Address</th>
			<th>City</th>
			<th>State</th>
			<th>Zip</th>
		</tr>
	</thead>
	<tbody data-bind="foreach: viewModel.items">
		<tr>
			<td data-bind="text: name"></td>
			<td data-bind="text: address"></td>
			<td data-bind="text: city"></td>
			<td data-bind="text: state"></td>
			<td data-bind="text: zip"></td>
		</tr>
	</tbody>
</table>

<script type="text/javascript">

$(function () {
    ko.applyBindings(viewModel);
    viewModel.load();
});

var viewModel = {
    items: ko.observableArray([]),

    load: function () {
    	var self = this;
    	$.getJSON('@Url.RouteUrl("buildings", new { httproute = "", controller = "buildings" })',
			function (buildings) {
				ko.mapping.fromJS(buildings, {}, self.items);
			}
		);
    }
};
</script>