@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_master.cshtml";
}

<h2>Buildings For Company @ViewBag.Name</h2>

<button class="btn btn-primary btn-sm" data-bind="click: add">New</button>
<button class="btn btn-success btn-sm" onclick="window.history.back()">Back</button>
<table id="buildings" class="table table-striped table-hover ">
	<thead>
		<tr>
			<th>Name</th>
			<th>Address</th>
			<th>City</th>
			<th>State</th>
			<th>Zip</th>
			<th>Units</th>
		</tr>
	</thead>
	<tbody data-bind="foreach: items">

		<tr class="form-group">
			<td><input type="text" class="form-control input-sm" data-bind="value: name"></td>
			<td><input type="text" class="form-control input-sm" data-bind="value: address"></td>
			<td><input type="text" class="form-control input-sm" data-bind="value: city"></td>
			<td><input type="text" class="form-control input-sm" data-bind="value: state"></td>
			<td><input type="text" class="form-control input-sm" data-bind="value: zip"></td>
			<td><a data-bind="attr: { href: '@Url.Action("Units", "Home")/' + id() }" class="btn btn-info btn-sm">Units</a></td>
		    <td>
		        @Html.Partial("_DeleteButton")
		    </td>
		</tr>
	</tbody>
</table>

<script type="text/javascript">

    $(function () {
        var viewModel = new propertyManager.ViewModel('@Url.RouteUrl("buildings", new { httproute = "", companyid = ViewBag.Id })', { "name": "New Building", "state": "MN"});
        viewModel.get(function () {
            ko.applyBindings(viewModel);
        });
    });

</script>